---
apiVersion: kubeadm.k8s.io/v1beta1
kind: InitConfiguration
localAPIEndpoint:
  advertiseAddress: {{ listen_ip }}
nodeRegistration:
  kubeletExtraArgs:
    cloud-provider: aws
---
apiVersion: kubeadm.k8s.io/v1beta1
kind: ClusterConfiguration
kubernetesVersion: {{ global_configuration.K8S_VERSION | default ('13.5') }}
clusterName: {{ contrail_configuration.KUBERNETES_CLUSTER_NAME | default('k8s')}}
networking:
  podSubnet: {{ contrail_configuration.KUBERNETES_POD_SUBNETS | default('10.32.0.0/12') }}
  serviceSubnet: {{ contrail_configuration.KUBERNETES_SERVICE_SUBNETS | default('10.96.0.0/12') }}
controllerManager:
  extraArgs:
    cloud-provider: aws
apiServer:
  extraArgs:
    cloud-provider: aws
---
apiVersion: kubeproxy.config.k8s.io/v1alpha1
kind: KubeProxyConfiguration
clusterCIDR: {{ contrail_configuration.KUBERNETES_POD_SUBNETS | default('10.32.0.0/12') }}
